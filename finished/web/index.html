<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    <title>Dart Chat</title>
    <link rel="stylesheet" href="chat.css">
    <link rel="components" href="chat_window.html">
    <link rel="components" href="username_input.html">
    <link rel="components" href="message_input.html">    
  </head>
  <body>
    <h1><img src="../logo.png" alt="Dart">Dart Chat</h1>
    
    <p>A client-server chat application written in Dart.</p>
    
    <x-chat-window id="chat-window"></x-chat-window>
    <x-username-input id="username-input"></x-username-input>
    <x-message-input id="message-input"></x-message-input>
    
    <script type="application/dart">
      import 'package:web_components/web_components.dart';
      import 'dart:html';
      import 'dart:isolate' show Timer;
      
      main() {
        // The Web Components aren't ready immediately.
        new Timer(0, (timer) {
        
          // xtag is how you get to the Dart object.
          query("#chat-window").xtag.displayNotice("web component connected");
          
          // This is only necessary when you change the value of some Web
          // Component data not as the result of a user event.
          dispatch(); 
        });
      }
    </script>
    <script src="dart.js"></script>
  </body>
</html>
