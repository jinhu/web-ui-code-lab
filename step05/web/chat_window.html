<!DOCTYPE html>

<html><body>
  <element name="x-chat-window" constructor="ChatWindowComponent" extends="div">
    <template>
      <div>
        <textarea rows="10" class="chat-window" disabled>{{chatWindowText.toString()}}</textarea>
      </div>
    </template>
    
    <script type="application/dart">
      import 'package:web_components/web_components.dart';
      
      class ChatWindowComponent extends WebComponent {
        StringBuffer chatWindowText = new StringBuffer();
        
        displayMessage(String from, String msg) {
          _display("$from: $msg\n");
        }
      
        displayNotice(String notice) {
          _display("[system]: $notice\n");
        }
      
        _display(String str) {
          chatWindowText.add(str);
          
          // You have to call dispatch whenever Web Component data changes
          // and it's not the result of a user event. That happens a lot
          // for this method.
          dispatch();
        }
      }
    </script>
  </element>
</body></html>